(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1869e15f","chunk-a7ba604c"],{"02fb":function(e,t,n){},"0907":function(e,t,n){},"1d8e":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=Object(r["db"])("data-v-44fd3782");Object(r["I"])("data-v-44fd3782");var c={style:{width:"100%"}},a={style:{display:"inline-block",width:"calc(100% - 51px)","padding-right":"10px","text-align":"right"}},i={class:"drawer-bootom-button"},l=Object(r["n"])("取消"),u=Object(r["n"])(" 提交 ");Object(r["G"])();var d=o((function(e,t,n,d,b,s){var f=Object(r["O"])("a-button"),O=Object(r["O"])("custom-form"),m=Object(r["O"])("a-spin"),j=Object(r["O"])("a-popconfirm"),p=Object(r["O"])("a-drawer");return Object(r["F"])(),Object(r["k"])(p,{title:e.title,maskClosable:!0,width:700,placement:"right",closable:!0,onClose:e.handleCancel,visible:e.visible,style:{height:"100%",overflow:"auto","padding-bottom":"53px"}},{title:o((function(){return[Object(r["o"])("div",c,[Object(r["o"])("span",null,Object(r["R"])(e.title),1),Object(r["o"])("span",a,[Object(r["o"])(f,{onClick:e.toggleScreen,icon:"appstore",style:{height:"20px",width:"20px",border:"0px"}},null,8,["onClick"])])])]})),default:o((function(){return[Object(r["o"])(m,{spinning:e.confirmLoading},{default:o((function(){return[Object(r["o"])(O,{ref:"drawerCustomForm",formArr:e.formArr,onSubmit:e.ok,onError:e.error,actionShow:!1},null,8,["formArr","onSubmit","onError"])]})),_:1},8,["spinning"]),Object(r["bb"])(Object(r["o"])("div",i,[Object(r["o"])(j,{title:"确定放弃编辑？",onConfirm:e.handleCancel,okText:"确定",cancelText:"取消"},{default:o((function(){return[Object(r["o"])(f,{style:{"margin-right":"0.8rem"}},{default:o((function(){return[l]})),_:1})]})),_:1},8,["onConfirm"]),Object(r["o"])(f,{onClick:e.handleSubmit,type:"primary",loading:e.confirmLoading},{default:o((function(){return[u]})),_:1},8,["onClick","loading"])],512),[[r["X"],!e.disableSubmit]])]})),_:1},8,["title","onClose","visible"])})),b=n("5530"),s=n("b85c"),f=n("9382"),O=Object(r["p"])({components:{CustomForm:f["default"]},props:{formArr:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=Object(r["K"])(),o=Object(r["J"])({title:"操作",visible:!1,drawerWidth:700,confirmLoading:!1,modaltoggleFlag:!0,disableSubmit:!1}),c=function(){o.confirmLoading=!1,o.visible=!1,o.disableSubmit=!1},a=function(){var t,n=e.formArr,r=Object(s["a"])(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;"array"===o.fieldType?o.value=[]:o.value=null}}catch(a){r.e(a)}finally{r.f()}c()},i=function(){o.modaltoggleFlag=!o.modaltoggleFlag},l=function(){o.confirmLoading=!0,n.value.onSubmit()},u=function(e){t.emit("submit",e)},d=function(){o.confirmLoading=!1},f=function(){var e=document.body.clientWidth;o.drawerWidth=e<500?e:700},O=function(t){f(),o.visible=!0;for(var r=e.formArr,c=0,a=r.length;c<a;c++)t[r[c].key]&&(r[c].value=t[r[c].key]);setTimeout((function(){n.value.setForm(r)}),500)},m=function(){o.visible=!0,setTimeout((function(){n.value.setForm(e.formArr)}),500)};return Object(b["a"])(Object(b["a"])({},Object(r["U"])(o)),{},{handleCancel:a,toggleScreen:i,handleSubmit:l,ok:u,error:d,edit:O,add:m,drawerCustomForm:n})}});n("c495");O.render=d,O.__scopeId="data-v-44fd3782";t["default"]=O},2821:function(e,t,n){"use strict";n("0907")},c495:function(e,t,n){"use strict";n("02fb")},f794:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"table-operator"},c=Object(r["n"])(" 新增"),a={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},i=Object(r["n"])(" 已选择 "),l={style:{"font-weight":"600"}},u=Object(r["n"])("项   "),d={class:"ant-dropdown-link"},b=Object(r["n"])(" 更多 ");function s(e,t,n,s,f,O){var m=Object(r["O"])("icon-font"),j=Object(r["O"])("a-button"),p=Object(r["O"])("a-divider"),y=Object(r["O"])("a-menu-item"),k=Object(r["O"])("a-menu"),v=Object(r["O"])("a-dropdown"),g=Object(r["O"])("a-table"),h=Object(r["O"])("menu-modal"),w=Object(r["O"])("a-card");return Object(r["F"])(),Object(r["k"])(w,{bordered:!1},{default:Object(r["ab"])((function(){return[Object(r["o"])("div",o,[Object(r["o"])(j,{onClick:e.handleAdd,type:"primary"},{icon:Object(r["ab"])((function(){return[Object(r["o"])(m,{type:"icon-plus"})]})),default:Object(r["ab"])((function(){return[c]})),_:1},8,["onClick"])]),Object(r["o"])("div",null,[Object(r["o"])("div",a,[i,Object(r["o"])("a",l,Object(r["R"])(e.selectedRowKeys.length),1),u]),Object(r["o"])(g,{columns:e.columns,scroll:{x:1500},"row-key":function(e){return e.id},size:"middle",pagination:!1,dataSource:e.dataSource,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},{bodyCell:Object(r["ab"])((function(t){var n=t.column,o=t.record;return["component"===n.key?(Object(r["F"])(),Object(r["k"])("span",{key:0,title:o[n.key]},Object(r["R"])(e.$filters.ellipsis(o[n.key])),9,["title"])):"page_url"===n.key?(Object(r["F"])(),Object(r["k"])("span",{key:1,title:o[n.key]},Object(r["R"])(e.$filters.ellipsis(o[n.key])),9,["title"])):"control_url"===n.key?(Object(r["F"])(),Object(r["k"])("span",{key:2,title:o[n.key]},Object(r["R"])(e.$filters.ellipsis(o[n.key])),9,["title"])):"action"===n.key?(Object(r["F"])(),Object(r["k"])(r["b"],{key:3},[Object(r["o"])("a",{onClick:function(t){return e.handleEdit(o)}},"编辑",8,["onClick"]),Object(r["o"])(p,{type:"vertical"}),Object(r["o"])(v,null,{overlay:Object(r["ab"])((function(){return[Object(r["o"])(k,null,{default:Object(r["ab"])((function(){return[Object(r["o"])(y,null,{default:Object(r["ab"])((function(){return[Object(r["o"])("a",{href:"javascript:;",onClick:function(t){return e.handleDetail(o)}},"详情",8,["onClick"])]})),_:2},1024),Object(r["o"])(y,null,{default:Object(r["ab"])((function(){return[Object(r["o"])("a",{href:"javascript:;",onClick:function(t){return e.handleAddSub(o.id)}},"添加下级",8,["onClick"])]})),_:2},1024),Object(r["o"])(y,null,{default:Object(r["ab"])((function(){return[Object(r["o"])("a",{href:"javascript:;",onClick:function(t){return e.handleDelete(o.id)}},"删除",8,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),default:Object(r["ab"])((function(){return[Object(r["o"])("a",d,[b,Object(r["o"])(m,{type:"icon-down"})])]})),_:2},1024)],64)):Object(r["l"])("",!0)]})),_:1},8,["columns","row-key","dataSource","loading","rowSelection"])]),Object(r["o"])(h,{ref:"modalForm",key:e.currentId,formArr:e.formData,onSubmit:e.submit},null,8,["formArr","onSubmit"])]})),_:1})}var f=n("5530"),O=(n("380f"),n("f64c")),m=(n("96cf"),n("1da1")),j=[{title:"菜单名称",dataIndex:"name",key:"name"},{title:"菜单类型",dataIndex:"menuType",key:"menuType",customRender:function(e){var t=e.record;return t.page_url?"菜单":"按钮"}},{title:"icon",dataIndex:"icon",key:"icon"},{title:"组件",dataIndex:"component",key:"component"},{title:"路径",dataIndex:"page_url",key:"page_url"},{title:"控件地址",dataIndex:"control_url",key:"control_url"},{title:"排序",dataIndex:"sort",key:"sort"},{title:"操作",dataIndex:"action",fixed:"right",key:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],p=[{label:"菜单名称",type:"input",key:"name",value:null,required:!0,errMsg:"请输入",disabled:!1},{label:"上级菜单",type:"treeSelect",key:"parent_id",value:null,required:!1,errMsg:"请选择",disabled:!1,options:[]},{label:"菜单路径",type:"input",key:"page_url",value:null,required:!1,errMsg:"请输入",disabled:!1},{label:"前端组件",type:"input",key:"component",value:null,required:!1,errMsg:"请输入",disabled:!1},{label:"控件地址",type:"input",key:"control_url",value:null,required:!0,errMsg:"请输入",disabled:!1},{label:"菜单图标",type:"input",key:"icon",value:"",required:!1,errMsg:"请输入",disabled:!1},{label:"排序",type:"number",key:"sort",value:1,required:!0,errMsg:"请输入",fieldType:"number",disabled:!1},{label:"是否显示",type:"select",key:"is_show",value:1,required:!0,errMsg:"请选择",fieldType:"number",disabled:!1,options:[{text:"显示",value:1},{text:"隐藏",value:0}]},{label:"是否启用",type:"select",key:"is_enabled",value:1,required:!0,errMsg:"请选择",fieldType:"number",disabled:!1,options:[{text:"启用",value:1},{text:"禁用",value:0}]}],y=n("de46"),k=n("48b8"),v=n("1d8e"),g=Object(r["p"])({components:{MenuModal:v["default"]},setup:function(){var e=Object(r["K"])(!1),t=Object(r["J"])({selectedRowKeys:[],dataSource:[],formData:p,currentId:""}),n=Object(r["K"])(),o={list:"/system/getMenuPage",delete:"/system/deleteMenu",deleteBatch:"/sys/permission/deleteBatch"},c=function(){var n=Object(m["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.value=!0,n.next=3,Object(y["b"])(o.list);case 3:r=n.sent,r&&(t.dataSource=r.result),t.formData[1].options=t.dataSource,e.value=!1;case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();c();var a=function(e){t.currentId=e.id,setTimeout((function(){Object(k["e"])(n.value,e)}),100)},i=function(e){t.currentId=e.id,setTimeout((function(){Object(k["d"])(n.value,e)}),100)},l=function(t){Object(k["g"])(o.delete,t,e,(function(e){e&&c()}))},u=function(){t.currentId="0",setTimeout((function(){Object(k["b"])(n.value)}),100)},d=function(e){t.currentId="0",setTimeout((function(){Object(k["c"])(n.value,e)}),100)},b=function(){Object(k["a"])(o.deleteBatch,t.selectedRowKeys,e,(function(e){e&&c()}))},s=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==r.menuType&&2!==r.menuType||r.parentId){e.next=3;break}return O["a"].error("请检查你填的类型以及信息是否正确！"),e.abrupt("return");case 3:if(!t.currentId){e.next=10;break}return r["id"]=t.currentId,e.next=7,Object(y["c"])("/system/menuEdit/"+r["id"],r);case 7:o=e.sent,e.next=13;break;case 10:return e.next=12,Object(y["c"])("/system/menuEdit/0",r);case 12:o=e.sent;case 13:o&&(O["a"].success("操作成功"),Object(k["f"])(n.value),c());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){t.selectedRowKeys=e};return Object(f["a"])(Object(f["a"])({},Object(r["U"])(t)),{},{loading:e,handleAdd:u,handleEdit:a,handleAddSub:d,handleDetail:i,handleDelete:l,batchDel:b,onSelectChange:v,submit:s,modalForm:n,columns:j})}});n("2821");g.render=s;t["default"]=g}}]);